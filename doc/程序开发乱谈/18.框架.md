[回到首页](/)

# 第十八框架

    version:  1  
    created_at: 2016-01-22 15:09:35   

框架的基本目的是代码的重用。 通常框架会包含数据库访问， 页面渲染，路由这几个核心功能。
这个目的很原始。 其直接表现就是框架通常只能包含底层功能，因为高层功能无法通用。 
这导致一个现象： 光靠框架功能还是很原始， 还必须在框架之上建立一套针对自己环境的解决方案， 如函数集，库等。
而且框架反而带来框架本身的学习成本。 本来希望减少工作，实际却增加了工作。

我以为框架的概念需要提升。 框架目的可以是分离不同难度层次的开发。至少可以分成几个层次。 
框架设计者，框架应用拓展者，框架使用者。 不同层次专注于不同的目的，一个框架使用者根本不需要知道那么多的框架细节。 

php框架的发展。
最开始php没有框架。 后来mvc模式很火，于是框架一个劲地去模仿mvc模式。 这种模式其实不适合。
其原因是web开发中，通常混用多种语言， php,html,javascript,css. mvc适合同一种语言完成所有工作。
随着前端功能越来越偏向于使用javascript实现， 框架的mvc模式没什么特别优势。 如果说有的话，就是规范了url路由而已。
javascript 倒是可以做mvc框架。 只是javascript这个老旧的语言，一旦需要扩展或者调试功能，估计是噩梦。

后来的php框架估计在模仿java。 比如zf2应用了大量的模式， 什么反射注入等等，这些都是来源自java。
为什么非得这么复杂？ 我猜主要的目的是希望框架能达到整合第三方公司开发的模块。 
从想法来说很对。 从代码实现来说，真是蹩脚。 

整合第三方模块，一向是个难题。难点不在于代码如何写，而是如何组织。 
在松散无组织下的第三方模块，缺少一致的设计理念，和易懂的命名方法， 通常让整合变得很是麻烦。 从python的扩展来看就很明显。
如果可以令模块保持准确的命名和一致的用法，这才能令python腾飞。 

php方面我猜测它们的逻辑是这样的： 通过psr*规范，达到命名等方面的统一。 通过实现模块的功能，让第三方扩展容易加载。 
最终实现一个强大的php框架，成为php标准。
想法似乎很宏伟。只是有几个致命的问题。

1，这是一种强迫的进化， 如果设计者是天才，那么倒可能实现。 否则违背正常的发展步伐，很容易崩塌。
显然这帮设计的人不是天才，更感觉是偏执的技术狂人。 设计的东西完全不是从实际中出发的， 十分难用。
并且从java中学习这一点，恐怕他们自己也不知道自己在干什么。
我估计迟早这种东西会失败。

2，php是一门特殊的语言。 和java不同。 非要模仿其它语言，能好用吗？ php的特点是略混乱且快速。 
而现在这些框架的特点是繁琐且迟钝。 java一向以慢为特点， php如果也变得非常慢，还怎么用？
框架那么繁琐， 一下提高了写代码的门槛。 原来写个php,也许是30分水平即可，现在至少80分。 
把原先良好的群众基础抛弃了，还想繁荣发展吗？！

3，php运行的方式是安全修改且慢。如果能增加另一种方式，支持快速但是有一定要求，那也是不错的途径。
但是这些框架的结果是更慢且更麻烦并且一旦出错，查找错误极端麻烦。 
zf2本地的网站，慢的我都不愿意打开。 这玩意让所有环节的成本剧增，实在没看出多少好处。

4，第三方代码一向有一个问题。 就是应用到自己环境，第一功能未必符合自己需求，需要调整。
第二是代码可能存在问题。一旦遇到问题，需要调试和修改。
代码间的版本依赖也是大问题。 linux系统中的包依赖，真是折腾死人。
所以这种框架带来的问题有： 
1，难以修改第三方代码。应该首先地弄懂第三方代码才能修改，这很难。
2，第三方代码可能存在问题，风险暗中存在， 无法提前解决。
3，代码复杂之后地版本依赖带来风险。

还有其它更多问题，都是基于这种第三方代码带来地风险。
想轻松就使用第三方代码，哪那么容易。


我的框架观念。
1，框架的功能在于确定一种结构。 并非重用代码。 重用代码是函数，类，库，代码片段的功能。
这个结构安排了不同代码所处的位置。 
2，框架的结构，使得不同层次的代码有其位置。对应的是不同层次的开发者，也确立了他们的位置。
令不同层次的开发者可以一同工作， 带来分工上的效率提升。

框架设计的几个难点：
1，显然框架需要一些全局的东西。 这些全局的东西如何被不同地方的代码所使用，并且能避免相互修改产生的问题？
2，框架需要支持模块概念。缺少模块的框架不算一个成熟的框架。 模块是成人框架和小孩框架的区别。
模块有几个关键难点： 如何安装，卸载，启用，禁用？ 模块间依赖如何解决？模块间如何共享？
3，框架本身的复杂程度会带来成本的上升。 如何尽量减少这种成本的增加，并努力使用框架带来收益？
4，框架会导致运行变慢，如何避免？


