# 测试服务器木马研究， 怎么来的？



1.  找到此异常进程
2.  查看此异常进程的父进程
	htop , 按 t 
	查看它的父进程

3. 查看进程使用的文件
	lsof -p PID

4. 查看某文件相关的进程

	lsof  PATH

5. 查看监听端口的进程
	lsof -i :25

6. 查看某个用户打开的文件

	lsof -u root
	lsof -u ^root  ( 非root用户打开的文件)

7.查看进程相关的网络连接

	netstat -nlp | grep  PID

8.  查看进程更详细信息

	cd /proc/PID 
		查看其中的 cmdline ,  fd ， 等目录或文件， 获得更多信息
		"cmdline"，这个文件包含整个用来产生进程的命令行。这个文件的内容是命令行参数包括传递来启动进程的所有参数。所有包含在这个文件的信息即命令和各个启动参数，没有任何的格式和任何的空格。
		"cwd"，像我们从上面看见的，这是一个符号链接，它指向进程的当前工作目录。
		"environ"包括在VARIABL=value为这个进程定义的所有的环境变量。正如"cmdline"一样，包含在文件中的命令和各个参数的信息没有任何的格式和空格。
		"exe"，这是一个符号链接指向启动当前进程的可执行文件。
		"fd"，这个目录包括被指定进程打开的文件描述符，如果一个进程打开的文件描述符过多，会造成打开文件失败，通过检查这个目录可以查找打开文件失败的原因。
		"maps"， 当你打出这个命名管道的内容，你可以看到进程的地址空间部分，当前被映射到一个文件。这个部分，从左到右是：和这个映射有关的地址空间，和这个映射有关的 权限，距离文件开始（即这个映射开始的地方）的偏移量，这个映射文件所在的设备，文件的inode号，最后是文件名本身。
		"status",这个文件给你有关进程名的信息，它的当前的状态，睡眠或者清醒，它的PID，UID，PPID和大量其它基本信息。这个信息可以在一个更简单和结构化的语法中看到，通过使用工具如"ps"和"top"。
	

9.  其它
	比如查看某个进程打开了哪些文件：ls -l /proc/5040/fd/
	查看这个进程的工作路径：ls -l /proc/5040/cwd/
	查看这个进程的二进制文件所在位置：ls -l /proc/5040/exe
	查看进程的状态总览：cat /proc/5040/status
	查看进程的内存使用状态： cat /proc/5040/statm

	 

	查看当前系统的内存使用情况：cat /proc/meminfo
	查看当前系统的网络流量：cat /proc/net/dev
	查看当前系统的负载：cat /proc/loadavg
	查看当前系统的连接情况：cat /proc/net/snmp
	查看当前系统的基本统计情况（cpu时间的消耗分布等）：cat /proc/stat

	1.查看进程的pid，以Java为例：ps -ef | grep java

	2.查看进程状态：cat /proc/[pid]/status


	atop,ntop,
	
