
  # js代码复杂化的解决方案

      version:  1
      created_at:  2016-01-02
      updated_at:  None

      created at 2016-01-02 10:01:47 


      None


      <p>
      JS代码复杂化的解决方案
任何语言都在代码庞大后会遇到困难， js也不例外。

解决代码复杂度有几种常见办法：
    1， function实现共用
    2，封装成库仅仅透露接口
    3， 类来封装属性和方法，仅仅提供接口
    4， 语言的模块支持，
    5， 类实现模块的支持
    6， 框架实现细节的抽象，避免考虑过多内容
    
    
对于JS：
    1， function 是不够的，
        因为： 
                1， function 暴露所有方法
                 2， function 缺少入口， 难以进行分层
                 3， function无法封装变量
                 
      2， 语言本身目前不支持模块， ecmascript 6 会支持，似乎效果未必好，因为载入script 是一次性的，每个模块载入一个js,不太可行
      
      3， 目前首要任务是实现类的模拟， 重要功能是
            a, 包含变量和函数
            b, 能有简单继承功能
            c, 能支持初始化
            4， 内部始终能提供一个  self 指针指向自身， 在任何情况下
            
            
            
        
        
 目前类的实现采用一种简单的方法：
    CLASS={
       create:function(){
            var obj={}
            
            
            return obj;
       }
    
    } 
    
    
    这种方法比较简单，功能也强，缺点是1， 方法没有共用，如果创建太多实例会影响性能， 但是可以解决
    2， 无法支持  instanceof ,但是应该有办法避免
    
    这其实就是    var object={} , return obj 的进一步封装，相对其它方法来说，比较简单明了。不用记忆 constructor, prototype等等， 权衡之下，暂时就用它了。
    
    
如何更清晰?
        根据大脑的思考原则， 一是分类，二是分层。
        先是分类， 然后更加复杂了分层。
        
        如何分类？
                       首先，程序的核心是逻辑。
                       对于图形界面， UI是重要的组成部分， 所以可以分成  核心逻辑+图形逻辑
                       
                       通过两个类来处理：  Function, FunctionUI, 
                       Function 调用 FunctionUI来处理， 把图形处理细节放在 UI类中， 实现逻辑的简化
                       
                       如果更复杂呢？  可以根据情况创建更多其他逻辑， 如 Model逻辑， Route逻辑等等
                       
                       这相当与  MVC 中的  CV, 但是C 是核心， V 是辅助， M也是辅助，并且只要有需要，可以创建更多的辅助
                       
                       
         怎么分层？
                      比如 db中， 基础函数 -> zend  -> frd 接口， 这就是封装。
                      
          类和接口哪个更适用？
           	当方法比较少且固定，接口更适合。
           	当方法比较多，且不固定，类更适合，针对UI,类适合，因为UI自定义很多，没法使用固定的接口
    
    
    

      </p>

  